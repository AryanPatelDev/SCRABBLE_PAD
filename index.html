<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scrabble Pad</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#181822" />

    <!-- Fixed favicon references - remove leading slash -->
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="site.webmanifest" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    class="group bg-body text-gray-950 dark:bg-[#181822] dark:text-white transition-colors duration-300"
  >
    <div class="h-screen relative max-w-screen-lg mx-auto">
      <!-- Enhanced Document Manager -->

      <!-- Top-right icons container with improved positioning -->
      <div class="absolute top-4 right-6 flex items-center gap-4">
        <button
          id="settingsToggle"
          class="text-xl settings-button"
          aria-label="Open settings menu"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="3"></circle>
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"
            ></path>
          </svg>
        </button>
      </div>

      <!-- Heading Area with proper spacing -->
      <div class="text-center my-4">
        <h3 id="heading" contenteditable="true" class="placeholder">
          HEADING HERE...
        </h3>
      </div>

      <!-- Textarea for writing -->
      <textarea
        id="scrabble-pad"
        placeholder="Start writing..."
        class="textarea-fullscreen"
      ></textarea>

      <!-- Word counter -->
      <div
        id="word-counter"
        class="text-sm text-gray-500 dark:text-gray-400 px-3 py-2 absolute bottom-0 right-0"
      >
        0 words | 0 characters
      </div>

      <!-- Save indicator -->
      <div
        id="save-indicator"
        class="text-sm text-gray-500 dark:text-gray-400 px-3 py-2 absolute bottom-0 left-0 opacity-0 transition-opacity"
      >
        Saved
      </div>
    </div>

    <!-- Settings Menu (hidden by default) -->
    <div
      id="settingsMenu"
      class="hidden absolute top-12 right-4 bg-gray-800 text-white rounded-md shadow-lg p-2"
      aria-label="Settings menu"
      role="menu"
    >
      <ul>
        <li>
          <button id="import-btn" class="block w-full text-left px-4 py-2">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Import File
          </button>
        </li>
        <li>
          <button id="export-btn" class="block w-full text-left px-4 py-2">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            Export File
          </button>
        </li>
        <li>
          <button id="share-btn" class="block w-full text-left px-4 py-2">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            Generate Link
          </button>
        </li>
        <li>
          <button id="darkModeToggle" class="block w-full text-left px-4 py-2">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            Switch to Dark Mode
          </button>
        </li>
        <li>
          <button id="clearTextBtn" class="block w-full text-left px-4 py-2">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="3 6 5 6 21 6"></polyline>
              <path
                d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              ></path>
            </svg>
            Clear Text
          </button>
        </li>
        <li>
          <button id="showWelcomeBtn" class="block w-full text-left px-4 py-2">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            Welcome Guide
          </button>
        </li>
      </ul>
    </div>

    <!-- Share Link Dialog -->
    <div id="shareLinkDialog" class="app-modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Share Your Note</h3>
          <button id="closeShareDialog" class="modal-close" aria-label="Close">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p>Copy this link to share your note:</p>

          <div class="input-container">
            <input id="shareLink" type="text" readonly class="text-input" />
            <button id="copyLink" class="button button-copy">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path
                  d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"
                ></path>
              </svg>
            </button>
          </div>

          <div class="share-section">
            <p class="share-section-title">Or scan this QR code:</p>
            <div class="qr-container mx-auto">
              <canvas id="qrcode" width="200" height="200"></canvas>
            </div>
            <p class="qr-caption">Use your phone's camera to scan this code</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Shared Note View -->
    <div
      id="sharedNoteView"
      class="hidden h-screen relative max-w-screen-lg mx-auto p-4"
    >
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-bold">Shared Note</h3>
          <button
            id="editSharedNote"
            class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
          >
            Edit This Note
          </button>
        </div>
        <pre
          id="sharedNoteContent"
          class="whitespace-pre-wrap p-4 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"
        ></pre>
      </div>
    </div>

    <!-- Notification System -->
    <div id="notification" class="hidden">Action completed successfully</div>

    <!-- Welcome Modal for First-time Users -->
    <div id="welcomeModal" class="app-modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Welcome to Scrabble Pad</h3>
          <button id="closeWelcome" class="modal-close" aria-label="Close">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p>Scrabble Pad is a simple, distraction-free writing tool.</p>

          <ul class="welcome-list">
            <li>Click on "HEADING HERE..." to set your document title</li>
            <li>
              Use the settings menu (⚙️) to manage documents, import/export, and
              change themes
            </li>
            <li>Your work is automatically saved as you type</li>
          </ul>

          <p>Keyboard shortcuts:</p>
          <div class="shortcuts-grid">
            <div>Ctrl + Shift + S | Ctrl + S</div>
            <div>Export File</div>
            <div>Ctrl + O</div>
            <div>Import File</div>
            <div>Ctrl + Shift + D | Ctrl+ D</div>
            <div>Toggle Dark Mode</div>
          </div>

          <button id="startWriting" class="button w-full">Start Writing</button>
        </div>
      </div>
    </div>

    <!-- Footer with dynamic year -->
    <footer class="text-center text-xs text-gray-400 mt-8 pb-4">
      Scrabble Pad v1.3
    </footer>

    <!-- Update year script -->
    <script>
      document.getElementById("currentYear").textContent =
        new Date().getFullYear();
    </script>

    <!-- LZString for compression -->
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>

    <!-- QR Code Generator -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

    <!-- Main script -->
    <script src="script.js"></script>
  </body>
</html>
